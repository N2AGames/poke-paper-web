.card-container {
    width: clamp(10vh, 10vw, 18vmin);
    aspect-ratio: 2 / 3;
    perspective: 60vmin;
    /* Aplicamos la sombra aquí usando filter (unidades relativas) */
    filter: drop-shadow(0 1.2vmin 1vmin rgba(0,0,0,0.5));
}  

/* La carta base */
.card {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
}

/* Animación cuando se añade la clase .is-flipped */
.card.is-flipped {
    animation: jump-in 0.8s forwards;
}

/* Animación cuando se quita la clase (vuelta al dorso) */
.card:not(.is-flipped) {
    animation: jump-out 0.6s forwards;
}

@keyframes jump-in {
    0% { transform: rotateY(0deg) translateY(0) scale(1); }
    30% { transform: rotateY(90deg) translateY(-5vh) scale(1.1); } /* Punto más alto */
    60% { transform: rotateY(180deg) translateY(0) scale(1); }    /* Cae */
    80% { transform: rotateY(180deg) translateY(-1vh) scale(1); } /* Rebote pequeño */
    100% { transform: rotateY(180deg) translateY(0) scale(1); }   /* Reposo */
} 

@keyframes jump-out {
    0% { transform: rotateY(180deg) translateY(0); }
    50% { transform: rotateY(90deg) translateY(-3vh); } /* Salto pequeño al volver */
    100% { transform: rotateY(0deg) translateY(0); }
} 

.card-face {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    background: transparent !important; /* Asegura que no haya fondo sólido */
}

.card-back {
    transform: rotateY(180deg);
    position: relative;
    overflow: hidden;
    /* Usamos la variable definida en JS para el fondo */
    border-radius: 0.6vmin;
}

/* El marco por encima de todo */
.back-template {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1; /* El fondo abajo del todo */
}

/* La foto del contenido */
.back-content {
    position: absolute;
    top: 20%; 
    left: 12%;
    width: 76%;
    height: auto;
    max-height: 60%;
    z-index: 2; /* La foto encima del fondo */
    object-fit: cover;
    border-radius: 0.6vmin; /* Para que la foto también tenga esquinas redondeadas */
} 

/* El texto Pixel Art */
.back-text {
    position: absolute;
    bottom: 12%;
    left: 0%;
    width: 100%;
    z-index: 3;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.name-box {
    width: 78%;
    max-width: 86%;
    min-width: 40%;
    margin: 0 auto;
    /* vertical padding only; horizontal spacing handled by edges/center */
    padding: clamp(0.45vmin, 1.2vw, 0.8vmin) 0;
    box-sizing: border-box;
    position: relative;
    z-index: 3;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0;
    --name-edge-width: clamp(1.2vmin, 3vw, 2.2vmin);
    --name-center-height: clamp(2.2vmin, 4.5vw, 2.8vmin);
}

.name-left, .name-right {
    flex: 0 0 var(--name-edge-width);
    height: var(--name-center-height);
    display: flex;
    align-items: center;
    justify-content: center;
    image-rendering: pixelated;
}

.name-left {
    align-items: end;
    justify-content: right;
}

.name-right {
    align-items: start;
    justify-content: left;
}

.name-left img, .name-right img {
    height: 100%;
    width: auto;
    display: block;
    image-rendering: pixelated;
}

.name-center {
    flex: 1 1 auto;
    height: var(--name-center-height);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 clamp(0.6vmin, 1.6vw, 1vmin);
    position: relative; /* Para posicionar la imagen de fondo */
    box-sizing: border-box;
    overflow: hidden;
}

.name-center-img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    z-index: 0;
    image-rendering: pixelated;
}

.name-center .name-center-text {
    position: relative;
    z-index: 1;
    width: 100%;
    text-align: center;
}


.text-display {
    /* Fuente Pixel */
    font-family: 'Press Start 2P', cursive;
    font-size: 0.5rem;
    color: black;
    
    /* Evitar suavizado para que el pixel se vea nítido */
    image-rendering: pixelated;
    -webkit-font-smoothing: none;

    display: inline-block;
    width: 100%;
    text-align: center;
    white-space: inherit;
    overflow: hidden;
}

img { max-width: 100%; height: auto; }

/* Imagenes dentro de cards deben cubrir su contenedor */
.back-content { overflow: hidden; }
.back-content img { width: 100%; height: 100%; object-fit: cover; display: block; border-radius: inherit; }